<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Player</title>
</head>
<body>
    <h1>Video Player</h1>
    <video controls>
        <source src="" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    <select id="videoSelect">
        {% for video in videos %}
            <option value="{{ video }}">{{ video }}</option>
        {% endfor %}
    </select>
    <button onclick="playSelectedVideo()">Play Selected Video</button>
    {% if current_user.is_authenticated and current_user.role == 'admin' %}
        <button onclick="document.getElementById('fileInput').click()">Upload Video</button>
        <form id="uploadForm" action="{{ url_for('upload_file') }}" method="post" enctype="multipart/form-data" style="display: none;">
            <input id="fileInput" type="file" name="file" onchange="document.getElementById('uploadForm').submit()">
        </form>
    {% endif %}
    <br>
    <a href="/logout">Logout</a>

    <script>
        function playSelectedVideo() {
            var videoSelect = document.getElementById("videoSelect");
            var selectedVideo = videoSelect.options[videoSelect.selectedIndex].value;
            var videoPlayer = document.querySelector("video");
            videoPlayer.src = "{{ url_for('download_file', filename='') }}" + selectedVideo;
            videoPlayer.load();
        }
    </script>
</body>
</html>
